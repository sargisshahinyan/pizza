<% include header.ejs %>
<section class=" col-xs-11 col-sm-10">
    <article class="col-md-offset-1 col-md-10 list-group">
        <!--<%= JSON.stringify(orders, undefined, '\t') %>-->
        <% orders.forEach(order => { %>
        <div class="order container-fluid">
            <article class="row title">Order N<%= order.id %></article>
            <article class="person-details row">
                <section>
                    <div class="col-md-4">Name</div>
                    <div class="col-md-8"><%= order.firstName %></div>
                </section>
                <section>
                    <div class="col-md-4">Surname</div>
                    <div class="col-md-8"><%= order.lastName %></div>
                </section>
                <section>
                    <div class="col-md-4">Email</div>
                    <div class="col-md-8"><%= order.email %></div>
                </section>
                <section>
                    <div class="col-md-4">Phone</div>
                    <div class="col-md-8"><%= order.phone %></div>
                </section>
                <section>
                    <div class="col-md-4">Address</div>
                    <div class="col-md-8"><%= order.address1 + (order.address2 ? ', ' + order.address2 : '') %></div>
                </section>
                <section>
                    <div class="col-md-4">City</div>
                    <div class="col-md-8"><%= order.city %></div>
                </section>
                <section>
                    <div class="col-md-4">State</div>
                    <div class="col-md-8"><%= order.state %></div>
                </section>
            </article>
            <article class="title row">Orders List</article>
            <% Array.isArray(order.products) && order.products.forEach((product, i) => { %>
            <!--<div class="orderList">
                <article class="row">
                    <section class="col-md-5 orderListLeft">
                        <div class="row text-center">Product N<%= i + 1 %></div>
                        <div class="row">
                            <div class="col-md-6 product">Category Name</div>
                            <div class="col-md-6 value"><%= product.categoryName %></div>
                        </div>
                        <div class="row">
                            <div class="col-md-6 product">Name</div>
                            <div class="col-md-6 value"><%= product.name %></div>
                        </div>
                        <div class="row">
                            <div class="col-md-6 product">Price</div>
                            <div class="col-md-6 value"><%= product.total %> $</div>
                        </div>
                        <div class="row">
                            <div class="col-md-6 product">Summary</div>
                            <div class="col-md-6 value"><%= product.quantity %> x <%= product.total %> = <%= product.quantity * product.total %> $</div>
                        </div>
                    </section>
                    <section class="col-md-7 orderListRight">
                        <div class="row text-center">Product details</div>
                        <% Array.isArray(product.additions) && product.additions.forEach(function render(add) { %>
                        <div class="row text-center orderListDetails">
                            <div class="col-md-<%= Array.isArray(add.children) ? '6' : '12'%>"><%= add.name %></div>
                            <% if(Array.isArray(add.children)) { %>
                            <div class="col-md-6">
                                <% add.children.forEach(render) %>
                            </div>
                            <% } %>
                        </div>
                        <% }) %>
                    </section>
                </article>
            </div>-->
            <table class="table row orderList">
                <tr>
                    <th class="text-center h3" style="width: calc(100% / 3)">Product N<%= i + 1 %></th>
                    <th class="text-center h3" style="width: calc(200% / 3)">Product details</th>
                </tr>
                <tr>
                    <td>
                        <table class="table text-center">
                            <tr>
                                <td class="product">Category Name</td>
                                <td class="value"><%= product.categoryName %></td>
                            </tr>
                            <tr>
                                <td class="product">Name</td>
                                <td class="value"><%= product.name %></td>
                            </tr>
                            <tr>
                                <td class="product">Price</td>
                                <td class="value"><%= product.total %> $</td>
                            </tr>
                            <tr>
                                <td class="product">Summary</td>
                                <td class="value"><%= product.quantity %> x <%= product.total %> = <%= product.quantity * product.total %> $</td>
                            </tr>
                        </table>
                    </td>
                    <td>
                        <% Array.isArray(product.additions) && product.additions.forEach(function render(add) { %>
                        <table class="table text-center">
                            <tr>
                                <td style="width: 50%"><%= add.name %></td>
                                <% if(Array.isArray(add.children)) { %>
                                <td style="width: 50%">
                                    <% add.children.forEach(render) %>
                                </td>
                                <% } %>
                            </tr>
                        </table>
                        <% }); %>
                    </td>
                </tr>
            </table>
            <% }); %>
        </div>
        <% }); %>
    </article>
</section>
<script>
    $('.col').each(function () {
    	if(!this.innerHTML.trim()) {
		    $(this).remove();
        }
    });
</script>
<% include footer.ejs %>